{"ast":null,"code":"import{getHeaderTitle,HeaderBackContext}from'@react-navigation/elements';import{NavigationContext,NavigationRouteContext}from'@react-navigation/native';import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import{forNoAnimation,forSlideLeft,forSlideRight,forSlideUp}from\"../../TransitionConfigs/HeaderStyleInterpolators\";import Header from\"./Header\";export default function HeaderContainer(_ref){var mode=_ref.mode,scenes=_ref.scenes,layout=_ref.layout,getPreviousScene=_ref.getPreviousScene,getFocusedRoute=_ref.getFocusedRoute,onContentHeightChange=_ref.onContentHeightChange,style=_ref.style;var focusedRoute=getFocusedRoute();var parentHeaderBack=React.useContext(HeaderBackContext);return React.createElement(Animated.View,{pointerEvents:\"box-none\",style:style},scenes.slice(-3).map(function(scene,i,self){var _self,_self2;if(mode==='screen'&&i!==self.length-1||!scene){return null;}var _scene$descriptor$opt=scene.descriptor.options,header=_scene$descriptor$opt.header,headerMode=_scene$descriptor$opt.headerMode,_scene$descriptor$opt2=_scene$descriptor$opt.headerShown,headerShown=_scene$descriptor$opt2===void 0?true:_scene$descriptor$opt2,headerTransparent=_scene$descriptor$opt.headerTransparent,headerStyleInterpolator=_scene$descriptor$opt.headerStyleInterpolator;if(headerMode!==mode||!headerShown){return null;}var isFocused=focusedRoute.key===scene.descriptor.route.key;var previousScene=getPreviousScene({route:scene.descriptor.route});var headerBack=parentHeaderBack;if(previousScene){var _previousScene$descri=previousScene.descriptor,options=_previousScene$descri.options,route=_previousScene$descri.route;headerBack=previousScene?{title:getHeaderTitle(options,route.name)}:parentHeaderBack;}var previousDescriptor=(_self=self[i-1])===null||_self===void 0?void 0:_self.descriptor;var nextDescriptor=(_self2=self[i+1])===null||_self2===void 0?void 0:_self2.descriptor;var _ref2=(previousDescriptor===null||previousDescriptor===void 0?void 0:previousDescriptor.options)||{},_ref2$headerShown=_ref2.headerShown,previousHeaderShown=_ref2$headerShown===void 0?true:_ref2$headerShown,previousHeaderMode=_ref2.headerMode;var nextHeaderlessScene=self.slice(i+1).find(function(scene){var _ref3=(scene===null||scene===void 0?void 0:scene.descriptor.options)||{},_ref3$headerShown=_ref3.headerShown,currentHeaderShown=_ref3$headerShown===void 0?true:_ref3$headerShown,currentHeaderMode=_ref3.headerMode;return currentHeaderShown===false||currentHeaderMode==='screen';});var _ref4=(nextHeaderlessScene===null||nextHeaderlessScene===void 0?void 0:nextHeaderlessScene.descriptor.options)||{},nextHeaderlessGestureDirection=_ref4.gestureDirection;var isHeaderStatic=(previousHeaderShown===false||previousHeaderMode==='screen')&&!nextDescriptor||nextHeaderlessScene;var props={layout:layout,back:headerBack,progress:scene.progress,options:scene.descriptor.options,route:scene.descriptor.route,navigation:scene.descriptor.navigation,styleInterpolator:mode==='float'?isHeaderStatic?nextHeaderlessGestureDirection==='vertical'||nextHeaderlessGestureDirection==='vertical-inverted'?forSlideUp:nextHeaderlessGestureDirection==='horizontal-inverted'?forSlideRight:forSlideLeft:headerStyleInterpolator:forNoAnimation};return React.createElement(NavigationContext.Provider,{key:scene.descriptor.route.key,value:scene.descriptor.navigation},React.createElement(NavigationRouteContext.Provider,{value:scene.descriptor.route},React.createElement(View,{onLayout:onContentHeightChange?function(e){var height=e.nativeEvent.layout.height;onContentHeightChange({route:scene.descriptor.route,height:height});}:undefined,pointerEvents:isFocused?'box-none':'none',accessibilityElementsHidden:!isFocused,importantForAccessibility:isFocused?'auto':'no-hide-descendants',style:mode==='float'&&!isFocused||headerTransparent?styles.header:null},header!==undefined?header(props):React.createElement(Header,props))));}));}var styles=StyleSheet.create({header:{position:'absolute',top:0,left:0,right:0}});","map":{"version":3,"sources":["HeaderContainer.tsx"],"names":["getHeaderTitle","HeaderBackContext","NavigationContext","NavigationRouteContext","React","forNoAnimation","forSlideLeft","forSlideRight","forSlideUp","Header","HeaderContainer","mode","scenes","layout","getPreviousScene","getFocusedRoute","onContentHeightChange","style","focusedRoute","parentHeaderBack","useContext","slice","map","scene","i","self","length","header","headerMode","headerShown","headerTransparent","headerStyleInterpolator","descriptor","options","isFocused","key","route","previousScene","headerBack","title","name","previousDescriptor","nextDescriptor","previousHeaderShown","previousHeaderMode","nextHeaderlessScene","find","currentHeaderShown","currentHeaderMode","gestureDirection","nextHeaderlessGestureDirection","isHeaderStatic","props","back","progress","navigation","styleInterpolator","e","height","nativeEvent","undefined","styles","StyleSheet","create","position","top","left","right"],"mappings":"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","sourceRoot":"../../src","sourcesContent":["import { getHeaderTitle, HeaderBackContext } from '@react-navigation/elements';\nimport { NavigationContext, NavigationRouteContext } from '@react-navigation/native';\nimport * as React from 'react';\nimport { Animated, StyleSheet, View } from 'react-native';\nimport { forNoAnimation, forSlideLeft, forSlideRight, forSlideUp } from '../../TransitionConfigs/HeaderStyleInterpolators';\nimport Header from './Header';\nexport default function HeaderContainer(_ref) {\n  let {\n    mode,\n    scenes,\n    layout,\n    getPreviousScene,\n    getFocusedRoute,\n    onContentHeightChange,\n    style\n  } = _ref;\n  const focusedRoute = getFocusedRoute();\n  const parentHeaderBack = React.useContext(HeaderBackContext);\n  return /*#__PURE__*/React.createElement(Animated.View, {\n    pointerEvents: \"box-none\",\n    style: style\n  }, scenes.slice(-3).map((scene, i, self) => {\n    var _self, _self2;\n    if (mode === 'screen' && i !== self.length - 1 || !scene) {\n      return null;\n    }\n    const {\n      header,\n      headerMode,\n      headerShown = true,\n      headerTransparent,\n      headerStyleInterpolator\n    } = scene.descriptor.options;\n    if (headerMode !== mode || !headerShown) {\n      return null;\n    }\n    const isFocused = focusedRoute.key === scene.descriptor.route.key;\n    const previousScene = getPreviousScene({\n      route: scene.descriptor.route\n    });\n    let headerBack = parentHeaderBack;\n    if (previousScene) {\n      const {\n        options,\n        route\n      } = previousScene.descriptor;\n      headerBack = previousScene ? {\n        title: getHeaderTitle(options, route.name)\n      } : parentHeaderBack;\n    }\n\n    // If the screen is next to a headerless screen, we need to make the header appear static\n    // This makes the header look like it's moving with the screen\n    const previousDescriptor = (_self = self[i - 1]) === null || _self === void 0 ? void 0 : _self.descriptor;\n    const nextDescriptor = (_self2 = self[i + 1]) === null || _self2 === void 0 ? void 0 : _self2.descriptor;\n    const {\n      headerShown: previousHeaderShown = true,\n      headerMode: previousHeaderMode\n    } = (previousDescriptor === null || previousDescriptor === void 0 ? void 0 : previousDescriptor.options) || {};\n\n    // If any of the next screens don't have a header or header is part of the screen\n    // Then we need to move this header offscreen so that it doesn't cover it\n    const nextHeaderlessScene = self.slice(i + 1).find(scene => {\n      const {\n        headerShown: currentHeaderShown = true,\n        headerMode: currentHeaderMode\n      } = (scene === null || scene === void 0 ? void 0 : scene.descriptor.options) || {};\n      return currentHeaderShown === false || currentHeaderMode === 'screen';\n    });\n    const {\n      gestureDirection: nextHeaderlessGestureDirection\n    } = (nextHeaderlessScene === null || nextHeaderlessScene === void 0 ? void 0 : nextHeaderlessScene.descriptor.options) || {};\n    const isHeaderStatic = (previousHeaderShown === false || previousHeaderMode === 'screen') &&\n    // We still need to animate when coming back from next scene\n    // A hacky way to check this is if the next scene exists\n    !nextDescriptor || nextHeaderlessScene;\n    const props = {\n      layout,\n      back: headerBack,\n      progress: scene.progress,\n      options: scene.descriptor.options,\n      route: scene.descriptor.route,\n      navigation: scene.descriptor.navigation,\n      styleInterpolator: mode === 'float' ? isHeaderStatic ? nextHeaderlessGestureDirection === 'vertical' || nextHeaderlessGestureDirection === 'vertical-inverted' ? forSlideUp : nextHeaderlessGestureDirection === 'horizontal-inverted' ? forSlideRight : forSlideLeft : headerStyleInterpolator : forNoAnimation\n    };\n    return /*#__PURE__*/React.createElement(NavigationContext.Provider, {\n      key: scene.descriptor.route.key,\n      value: scene.descriptor.navigation\n    }, /*#__PURE__*/React.createElement(NavigationRouteContext.Provider, {\n      value: scene.descriptor.route\n    }, /*#__PURE__*/React.createElement(View, {\n      onLayout: onContentHeightChange ? e => {\n        const {\n          height\n        } = e.nativeEvent.layout;\n        onContentHeightChange({\n          route: scene.descriptor.route,\n          height\n        });\n      } : undefined,\n      pointerEvents: isFocused ? 'box-none' : 'none',\n      accessibilityElementsHidden: !isFocused,\n      importantForAccessibility: isFocused ? 'auto' : 'no-hide-descendants',\n      style:\n      // Avoid positioning the focused header absolutely\n      // Otherwise accessibility tools don't seem to be able to find it\n      mode === 'float' && !isFocused || headerTransparent ? styles.header : null\n    }, header !== undefined ? header(props) : /*#__PURE__*/React.createElement(Header, props))));\n  }));\n}\nconst styles = StyleSheet.create({\n  header: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0\n  }\n});\n//# sourceMappingURL=HeaderContainer.js.map"]},"metadata":{},"sourceType":"module"}