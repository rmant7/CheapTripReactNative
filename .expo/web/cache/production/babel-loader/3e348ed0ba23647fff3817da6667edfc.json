{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import*as queryString from'query-string';import fromEntries from\"./fromEntries\";import validatePathConfig from\"./validatePathConfig\";var getActiveRoute=function getActiveRoute(state){var route=typeof state.index==='number'?state.routes[state.index]:state.routes[state.routes.length-1];if(route.state){return getActiveRoute(route.state);}return route;};export default function getPathFromState(state,options){if(state==null){throw Error(\"Got 'undefined' for the navigation state. You must pass a valid state object.\");}if(options){validatePathConfig(options);}var configs=options!==null&&options!==void 0&&options.screens?createNormalizedConfigs(options===null||options===void 0?void 0:options.screens):{};var path='/';var current=state;var allParams={};var _loop=function _loop(){var index=typeof current.index==='number'?current.index:0;var route=current.routes[index];var pattern=void 0;var focusedParams=void 0;var focusedRoute=getActiveRoute(state);var currentOptions=configs;var nestedRouteNames=[];var hasNext=true;while(route.name in currentOptions&&hasNext){pattern=currentOptions[route.name].pattern;nestedRouteNames.push(route.name);if(route.params){(function(){var stringify=(_currentOptions$route=currentOptions[route.name])===null||_currentOptions$route===void 0?void 0:_currentOptions$route.stringify;var currentParams=fromEntries(Object.entries(route.params).map(function(_ref){var _ref3=_slicedToArray(_ref,2),key=_ref3[0],value=_ref3[1];return[key,stringify!==null&&stringify!==void 0&&stringify[key]?stringify[key](value):String(value)];}));if(pattern){Object.assign(allParams,currentParams);}if(focusedRoute===route){focusedParams=_objectSpread({},currentParams);(_pattern=pattern)===null||_pattern===void 0?void 0:_pattern.split('/').filter(function(p){return p.startsWith(':');}).forEach(function(p){var name=getParamName(p);if(focusedParams){delete focusedParams[name];}});}})();}if(!currentOptions[route.name].screens||route.state===undefined){hasNext=false;}else{index=typeof route.state.index==='number'?route.state.index:route.state.routes.length-1;var nextRoute=route.state.routes[index];var nestedConfig=currentOptions[route.name].screens;if(nestedConfig&&nextRoute.name in nestedConfig){route=nextRoute;currentOptions=nestedConfig;}else{hasNext=false;}}}if(pattern===undefined){pattern=nestedRouteNames.join('/');}if(currentOptions[route.name]!==undefined){path+=pattern.split('/').map(function(p){var name=getParamName(p);if(p==='*'){return route.name;}if(p.startsWith(':')){var value=allParams[name];if(value===undefined&&p.endsWith('?')){return'';}return encodeURIComponent(value);}return encodeURIComponent(p);}).join('/');}else{path+=encodeURIComponent(route.name);}if(!focusedParams){focusedParams=focusedRoute.params;}if(route.state){path+='/';}else if(focusedParams){for(var param in focusedParams){if(focusedParams[param]==='undefined'){delete focusedParams[param];}}var query=queryString.stringify(focusedParams,{sort:false});if(query){path+=\"?\"+query;}}current=route.state;};while(current){var _currentOptions$route;var _pattern;_loop();}path=path.replace(/\\/+/g,'/');path=path.length>1?path.replace(/\\/$/,''):path;return path;}var getParamName=function getParamName(pattern){return pattern.replace(/^:/,'').replace(/\\?$/,'');};var joinPaths=function joinPaths(){var _ref4;for(var _len=arguments.length,paths=new Array(_len),_key=0;_key<_len;_key++){paths[_key]=arguments[_key];}return(_ref4=[]).concat.apply(_ref4,_toConsumableArray(paths.map(function(p){return p.split('/');}))).filter(Boolean).join('/');};var createConfigItem=function createConfigItem(config,parentPattern){var _pattern2;if(typeof config==='string'){var _pattern3=parentPattern?joinPaths(parentPattern,config):config;return{pattern:_pattern3};}var pattern;if(config.exact&&config.path===undefined){throw new Error(\"A 'path' needs to be specified when specifying 'exact: true'. If you don't want this screen in the URL, specify it as empty string, e.g. `path: ''`.\");}pattern=config.exact!==true?joinPaths(parentPattern||'',config.path||''):config.path||'';var screens=config.screens?createNormalizedConfigs(config.screens,pattern):undefined;return{pattern:(_pattern2=pattern)===null||_pattern2===void 0?void 0:_pattern2.split('/').filter(Boolean).join('/'),stringify:config.stringify,screens:screens};};var createNormalizedConfigs=function createNormalizedConfigs(options,pattern){return fromEntries(Object.entries(options).map(function(_ref2){var _ref5=_slicedToArray(_ref2,2),name=_ref5[0],c=_ref5[1];var result=createConfigItem(c,pattern);return[name,result];}));};","map":{"version":3,"mappings":"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","names":["queryString","fromEntries","validatePathConfig","getActiveRoute","state","route","index","routes","length","getPathFromState","options","Error","configs","screens","createNormalizedConfigs","path","current","allParams","pattern","focusedParams","focusedRoute","currentOptions","nestedRouteNames","hasNext","name","push","params","stringify","_currentOptions$route","currentParams","Object","entries","map","_ref","key","value","String","assign","_pattern","split","filter","p","startsWith","forEach","getParamName","undefined","nextRoute","nestedConfig","join","endsWith","encodeURIComponent","param","query","sort","replace","joinPaths","paths","concat","Boolean","createConfigItem","config","parentPattern","exact","_pattern2","_ref2","c","result"],"sourceRoot":"../../src","sources":["getPathFromState.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}