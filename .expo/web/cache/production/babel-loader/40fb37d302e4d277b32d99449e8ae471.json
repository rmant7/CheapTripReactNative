{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import React,{useContext,useEffect,useState}from\"react\";import{Fontisto}from\"@expo/vector-icons\";import{generateColors}from\"../../scheme/colors\";import{Context}from\"../../../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var colors=generateColors.colors;var screenHeight=Dimensions.get(\"window\").height;var ListBottomComponent=function ListBottomComponent(_ref){var bottom=_ref.bottom,travelDataId=_ref.travelDataId;var buyTicketHandler=function buyTicketHandler(){console.log(\"Buy ticket\");};var _useState=useState({}),_useState2=_slicedToArray(_useState,2),travelData=_useState2[0],setTravelData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),fromLocation=_useState4[0],setFromLocation=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),toLocation=_useState6[0],setToLocation=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),transportationType=_useState8[0],setTransportationType=_useState8[1];var contextData=useContext(Context);var getTravelDataById=function getTravelDataById(id){return contextData.travelData.find(function(data){return data.id==id;});};var getLocationById=function getLocationById(id){return contextData.locations.find(function(loc){return loc.id==id;});};useEffect(function(){setTravelData(getTravelDataById(travelDataId));},[travelDataId]);useEffect(function(){setFromLocation(getLocationById(travelData.from));setToLocation(getLocationById(travelData.to));if(travelData.transportation_type==1){setTransportationType(\"plane\");}else if(travelData.transportation_type==2){setTransportationType(\"train\");}else if(travelData.transportation_type==3){setTransportationType(\"bus\");}},[travelData]);return _jsxs(View,{style:[styles.itemContainer,{borderBottomLeftRadius:bottom?5:0,borderBottomRightRadius:bottom?5:0}],children:[_jsx(View,{style:styles.directions,children:_jsx(Text,{style:styles.boldText,children:(fromLocation==null?void 0:fromLocation.name)+\" -> \"+(toLocation==null?void 0:toLocation.name)})}),_jsxs(View,{style:[styles.directions,{marginTop:10}],children:[_jsx(Fontisto,{style:styles.logo,name:transportationType,size:24,color:\"rgb(101,124,137)\"}),_jsxs(Text,{children:[\"Duration: \",Math.floor((travelData==null?void 0:travelData.time_in_minutes)/60)+\"h \"+(travelData==null?void 0:travelData.time_in_minutes)%60+\"min\"]}),_jsx(TouchableOpacity,{onPress:buyTicketHandler,children:_jsx(Text,{style:styles.buyTicket,children:\"Buy Ticket\"})}),_jsxs(Text,{style:styles.price,children:[\"\\u20AC\",travelData==null?void 0:travelData.euro_price]})]})]});};export default ListBottomComponent;var styles=StyleSheet.create({itemContainer:{height:screenHeight/10,width:\"100%\",backgroundColor:colors.surface,borderTopWidth:0,borderWidth:1,borderColor:\"grey\",alignItems:\"center\",justifyContent:\"center\"},dropped:{flex:1,margin:10},logo:{marginHorizontal:4,paddingVertical:5},directions:{flexDirection:\"row\",justifyContent:\"space-between\",width:\"100%\",padding:5},boldText:{fontWeight:\"bold\"},buyTicket:{borderWidth:1,borderColor:colors.primary},price:{color:colors.primary}});","map":{"version":3,"names":["React","useContext","useEffect","useState","Fontisto","generateColors","Context","colors","screenHeight","Dimensions","get","height","ListBottomComponent","bottom","travelDataId","buyTicketHandler","console","log","travelData","setTravelData","fromLocation","setFromLocation","toLocation","setToLocation","undefined","transportationType","setTransportationType","contextData","getTravelDataById","id","find","data","getLocationById","locations","loc","from","to","transportation_type","styles","itemContainer","borderBottomLeftRadius","borderBottomRightRadius","directions","boldText","name","marginTop","logo","Math","floor","time_in_minutes","buyTicket","price","euro_price","StyleSheet","create","width","backgroundColor","surface","borderTopWidth","borderWidth","borderColor","alignItems","justifyContent","dropped","flex","margin","marginHorizontal","paddingVertical","flexDirection","padding","fontWeight","primary","color"],"sources":["C:/Users/luche/Desktop/CheapTripReactNative/src/components/ListBottomComponent/ListBottomComponent.tsx"],"sourcesContent":["import { TouchableOpacity, StyleSheet, Text, View, Dimensions } from \"react-native\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { FontAwesome5, Fontisto, MaterialIcons } from \"@expo/vector-icons\";\r\n\r\nimport { generateColors } from \"../../scheme/colors\";\r\nimport { Context } from \"../../../App\";\r\nimport { Location } from \"../../screens/Home\";\r\n\r\nconst colors = generateColors.colors;\r\n\r\nconst screenHeight = Dimensions.get(\"window\").height;\r\n\r\ninterface TravelData {\r\n  id: number,\r\n  from: number,\r\n  to: number,\r\n  transportation_type: number,\r\n  euro_price: number,\r\n  time_in_minutes: number,\r\n}\r\n\r\ninterface Props {\r\n  bottom: boolean,\r\n  travelDataId: number,\r\n}\r\n\r\nconst ListBottomComponent: React.FC<Props> = ({ bottom, travelDataId }) => {\r\n\r\n  const buyTicketHandler = () => {\r\n    console.log(\"Buy ticket\");\r\n  }\r\n  const [travelData, setTravelData] = useState({} as TravelData)\r\n  const [fromLocation, setFromLocation] = useState({} as Location)\r\n  const [toLocation, setToLocation] = useState({} as Location)\r\n  const [transportationType, setTransportationType] = useState<\"plane\" | \"bus\" | \"train\" | undefined>(undefined)\r\n  const contextData: any = useContext(Context);\r\n\r\n  const getTravelDataById = (id: number) => contextData.travelData.find((data: TravelData) => data.id == id)\r\n  const getLocationById = (id: number) => contextData.locations.find((loc: Location) => loc.id == id)\r\n\r\n  useEffect(() => {\r\n    setTravelData(getTravelDataById(travelDataId))\r\n  }, [travelDataId])\r\n\r\n  // you cant put it in the same useEffect cause by the time getLocationById getting called travelData is undefined\r\n\r\n  useEffect(() => {\r\n    setFromLocation(getLocationById(travelData.from))\r\n    setToLocation(getLocationById(travelData.to))\r\n    if (travelData.transportation_type == 1) {\r\n      setTransportationType(\"plane\")\r\n    }\r\n    else if (travelData.transportation_type == 2) {\r\n      setTransportationType(\"train\")\r\n    }\r\n    else if (travelData.transportation_type == 3) {\r\n      setTransportationType(\"bus\")\r\n    }\r\n  }, [travelData])\r\n\r\n\r\n  return (\r\n    <View\r\n      style={[\r\n        styles.itemContainer,\r\n        {\r\n          borderBottomLeftRadius: bottom ? 5 : 0,\r\n          borderBottomRightRadius: bottom ? 5 : 0,\r\n        },\r\n      ]}\r\n    >\r\n\r\n      <View style={styles.directions}>\r\n        <Text style={styles.boldText}>{`${fromLocation?.name} -> ${toLocation?.name}`}</Text>\r\n      </View>\r\n      <View style={[styles.directions, { marginTop: 10 }]}>\r\n        <Fontisto style={styles.logo} name={transportationType} size={24} color=\"rgb(101,124,137)\" />\r\n        <Text>Duration: {`${Math.floor(travelData?.time_in_minutes / 60)}h ${travelData?.time_in_minutes % 60}min`}</Text>\r\n        <TouchableOpacity onPress={buyTicketHandler}>\r\n          <Text style={styles.buyTicket}>Buy Ticket</Text>\r\n        </TouchableOpacity>\r\n        <Text style={styles.price}>â‚¬{travelData?.euro_price}</Text>\r\n      </View>\r\n    </View>\r\n\r\n  );\r\n};\r\n\r\nexport default ListBottomComponent;\r\n\r\nconst styles = StyleSheet.create({\r\n  itemContainer: {\r\n    height: screenHeight / 10,\r\n    width: \"100%\",\r\n    backgroundColor: colors.surface,\r\n    borderTopWidth: 0,\r\n    borderWidth: 1,\r\n    borderColor: \"grey\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  dropped: {\r\n    flex: 1,\r\n    margin: 10,\r\n  },\r\n  logo: {\r\n    marginHorizontal: 4,\r\n    paddingVertical: 5,\r\n  },\r\n  directions: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    width: \"100%\",\r\n    padding: 5,\r\n  },\r\n  boldText: {\r\n    fontWeight: \"bold\",\r\n  },\r\n  buyTicket: {\r\n    borderWidth: 1,\r\n    borderColor: colors.primary,\r\n  },\r\n  price: {\r\n    color: colors.primary,\r\n  }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}